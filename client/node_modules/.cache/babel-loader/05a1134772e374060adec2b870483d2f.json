{"ast":null,"code":"import _toConsumableArray from \"/Users/likhitha/Documents/cms/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/likhitha/Documents/cms/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/likhitha/Documents/cms/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _jsxFileName = \"/Users/likhitha/Documents/cms/client/src/components/dashboard/ViewBuilding.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _this2 = this,\n    _s3 = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState, useMap } from \"react\";\nimport service from './services';\nimport { EditControl } from \"react-leaflet-draw\";\nimport LayersControl2, { ControlledLayerItem } from \"./LayerControl2\"; // import \"./assets/leaflet.css\"\n// import \"./assets/leaflet.draw.css\"\n\nimport { Map, TileLayer, FeatureGroup, useLeaflet, LayersControl, Marker, Polygon, Popup, LayerGroup, Circle, GeoJSON } from \"react-leaflet\";\nimport Control from 'react-leaflet-control';\nimport L from \"leaflet\";\nimport { CardBody, Card, Breadcrumb, BreadcrumbItem, ButtonGroup, ButtonToolbar, Form, FormGroup, Label, Input, ModalHeader, Modal, ModalBody, ModalFooter } from 'reactstrap'; // Material components\n\nimport { makeStyles, Button } from \"@material-ui/core\";\nimport { set } from \"mongoose\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport ReactTooltip from \"react-tooltip\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    map: {\n      height: \"calc(90vh - 90px)\",\n      width: '60%',\n      zIndex: 0\n    },\n    buttonWrapper: {\n      zIndex: 1,\n      position: \"absolute\",\n      bottom: theme.spacing(2),\n      marginLeft: \"30%\",\n      marginBottom: \"8%\",\n      transform: \"translateX(-50%)\"\n    },\n    headerWrapper: {\n      zIndex: 1,\n      marginLeft: theme.spacing(3),\n      marginTop: theme.spacing(1)\n    }\n  };\n});\n\nfunction EditableLayer(props) {\n  _s();\n\n  var leaflet = useLeaflet();\n  var editLayerRef = React.useRef();\n  var drawControlRef = React.useRef();\n  var map = leaflet.map;\n  useEffect(function () {\n    if (!props.showDrawControl) {\n      map.removeControl(drawControlRef.current);\n    } else {\n      map.addControl(drawControlRef.current);\n    }\n\n    editLayerRef.current.leafletElement.clearLayers();\n    editLayerRef.current.leafletElement.addLayer(props.layer);\n    props.layer.on(\"click\", function (e) {\n      props.onLayerClicked(e, drawControlRef.current);\n    });\n  }, [props, map]);\n\n  function onMounted(ctl) {\n    drawControlRef.current = ctl;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(FeatureGroup, {\n      ref: editLayerRef,\n      children: /*#__PURE__*/_jsxDEV(EditControl, _objectSpread({\n        position: \"topright\",\n        onMounted: onMounted\n      }, props), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(EditableLayer, \"mRBzQf4B+lSmsOrt2PcplvXDKEI=\", false, function () {\n  return [useLeaflet];\n});\n\n_c = EditableLayer;\n\nfunction EditableGroup(props) {\n  _s2();\n\n  var _this = this;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedLayerIndex = _useState2[0],\n      setSelectedLayerIndex = _useState2[1];\n\n  function handleLayerClick(e, drawControl) {\n    setSelectedLayerIndex(e.target.feature.properties.editLayerId);\n  }\n\n  var dataLayer = new L.GeoJSON(props.data);\n  var layers = [];\n  var i = 0;\n  dataLayer.eachLayer(function (layer) {\n    layer.feature.properties.editLayerId = i;\n\n    if (layer.feature.properties.name !== undefined) {\n      layer.bindTooltip(layer.feature.properties.name, {\n        permanent: true,\n        opacity: 0.7,\n        direction: \"center\"\n      }).openTooltip();\n    }\n\n    layers.push(layer);\n    i++;\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: layers.map(function (layer, i) {\n      return /*#__PURE__*/_jsxDEV(EditableLayer, {\n        layer: layer,\n        onLayerClicked: handleLayerClick\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, _this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(EditableGroup, \"Ibts1gRA4nda0R5pUeZ3xqL+kKw=\");\n\n_c2 = EditableGroup;\n\nvar ViewBuilding = function ViewBuilding(props) {\n  _s3();\n\n  var editRef = useRef();\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      drawing = _useState4[0],\n      setDrawing = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      markers = _useState6[0],\n      setMarkers = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      details = _useState8[0],\n      setDetails = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      boundary = _useState10[0],\n      setBoundary = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      newPosition = _useState12[0],\n      setNewPosition = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      mapLayers = _useState14[0],\n      setMapLayers = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      customLayer = _useState16[0],\n      setCustomLayer = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      activeFloorPolygons = _useState18[0],\n      setActiveFloorPolygons = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      activeFloorBoundary = _useState20[0],\n      setActiveFloorBoundary = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      activeFloor = _useState22[0],\n      setActiveFloor = _useState22[1];\n\n  var _useState23 = useState(''),\n      _useState24 = _slicedToArray(_useState23, 2),\n      newDesc = _useState24[0],\n      setNewDesc = _useState24[1];\n\n  var _useState25 = useState(''),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isEdit = _useState26[0],\n      setIsEdit = _useState26[1];\n\n  var _useState27 = useState(0),\n      _useState28 = _slicedToArray(_useState27, 2),\n      boundaryid = _useState28[0],\n      setBoundaryid = _useState28[1];\n\n  var _useState29 = useState(''),\n      _useState30 = _slicedToArray(_useState29, 2),\n      selectedFloorGeoData = _useState30[0],\n      setselectedFloorGeoData = _useState30[1]; //const purpleOptions = { color: 'purple' }\n\n\n  var mapRef = useRef();\n  var fgRef = useRef();\n  var refno = window.location.pathname.replace('/ViewBuilding/', '');\n  var leaflet = useLeaflet();\n  var polygon = [];\n  var center = [51.505, -0.09];\n  var rectangle = [[51.49, -0.08], [51.5, -0.06]];\n\n  var _useState31 = useState(0),\n      _useState32 = _slicedToArray(_useState31, 2),\n      selectedLayerIndex = _useState32[0],\n      setSelectedLayerIndex = _useState32[1];\n\n  var updateFloor = {\n    floorno: markers.length + 1,\n    description: \"newDesc\",\n    color: '#' + (0x1000000 + Math.random() * 0xffffff).toString(16).substr(1, 6),\n    blocks: [],\n    boundaries: []\n  }; //const [selectedLayerIndex, setSelectedLayerIndex] = useState(0);\n\n  var _useState33 = useState(false),\n      _useState34 = _slicedToArray(_useState33, 2),\n      addFloor = _useState34[0],\n      setAddFloor = _useState34[1];\n\n  var _onFeatureGroupReady = function _onFeatureGroupReady(ref) {\n    if (ref !== undefined && ref !== null) {\n      var leafletFG = ref.leafletElement;\n\n      if (customLayer.length > 0) {\n        customLayer.eachLayer(function (layer) {\n          return leafletFG.addLayer(layer);\n        });\n      }\n    }\n  };\n\n  var handleDrawPolygonClick = function handleDrawPolygonClick(e) {\n    var activeFloorLcl = activeFloor;\n    var polygonType = e.target.value;\n    debugger;\n\n    switch (polygonType) {\n      case \"BO\":\n        break;\n\n      case \"BL\":\n        break;\n\n      default:\n        break;\n    }\n\n    if (activeFloorLcl !== undefined && activeFloorLcl !== null) {\n      if (activeFloorLcl.boundaries.length > 3) {\n        var layerType = e.layerType,\n            layer = e.layer;\n\n        if (layerType === \"polygon\") {\n          var _leaflet_id = layer._leaflet_id;\n          setMapLayers(function (layers) {\n            return [].concat(_toConsumableArray(layers), [{\n              id: _leaflet_id,\n              latlngs: layer.getLatLngs()[0]\n            } // [ id: _leaflet_id, latlng:layer.getLatLngs()[0] ]  ,\n            ]);\n          });\n        } //Edit this method to perform other actions\n\n\n        if (!drawing) {\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.enable();\n        } else {\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.completeShape();\n\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.disable();\n        }\n\n        setDrawing(!drawing);\n      }\n    }\n  }; //let dataLayer = new L.GeoJSON(props.data);\n\n\n  var onShapeDrawn = function onShapeDrawn(e) {\n    debugger;\n    setDrawing(false);\n    var layerType = e.layerType,\n        layer = e.layer;\n\n    if (layerType === \"polygon\") {\n      var _leaflet_id = layer._leaflet_id;\n    }\n\n    debugger;\n    var mar = markers;\n\n    for (var k = 0; k < mar.length; k++) {\n      var boundary_id = boundaryid;\n      boundary_id = layer._leaflet_id;\n      setBoundaryid(boundary_id);\n      console.log(boundaryid);\n      debugger;\n    } // e.layer.on('click', () => {\n    //     debugger;\n    //     setDrawing(layer);\n    //     //setSelectedLayerIndex(e.target.boundaryid);\n    //     console.log(selectedLayerIndex);\n    //     debugger;\n    //   editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n    // })\n\n\n    e.layer.on('contextmenu', function () {//do some contextmenu action here\n    });\n    e.layer.bindTooltip(\"Text\", {\n      className: 'leaflet-draw-tooltip:before leaflet-draw-tooltip leaflet-draw-tooltip-visible',\n      sticky: true,\n      direction: 'right'\n    });\n  };\n\n  function handleLayerClick(e, drawControl) {\n    debugger;\n    var layerType = e.layerType,\n        layer = e.layer;\n\n    if (layerType === \"polygon\") {\n      var _leaflet_id = layer._leaflet_id;\n    }\n\n    var drawingLcl = drawing;\n    drawingLcl = layer;\n    setDrawing(drawingLcl); //   setSelectedLayerIndex(e.target.boundaryid);\n    //     console.log(selectedLayerIndex);\n\n    debugger; //editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n  } //   e.layer.on('click', () => {\n  //     debugger;\n  //     setSelectedLayerIndex(e.target.boundaryid);\n  //     console.log(selectedLayerIndex);\n  //     debugger;\n  //   editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n  // })\n\n\n  function onEditPath() {\n    debugger;\n  }\n\n  function onCreate() {\n    debugger;\n  }\n\n  function onDeleted() {\n    debugger;\n  }\n\n  function reverseCoordinate(coor) {\n    var retCoor = [];\n\n    if (coor !== undefined && coor !== null) {\n      if (coor.length > 0) {\n        for (var coorIdx = 0; coorIdx < coor.length; coorIdx++) {\n          var bound = coor[coorIdx];\n          var row = [];\n\n          if (bound.length === 2) {\n            row.push(bound[1]);\n            row.push(bound[0]);\n            retCoor.push(row);\n          }\n        }\n      }\n    }\n\n    return retCoor;\n  }\n\n  function block2Layer(iBlock, floorIndex, floorColor) {\n    return {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": iBlock.blockId,\n        \"ground\": floorIndex\n      },\n      \"geometry\": {\n        \"type\": \"Polygon\",\n        \"color\": floorColor,\n        \"coordinates\": [reverseCoordinate(iBlock.bounds)]\n      }\n    };\n  }\n\n  function onFloorSelect(e, data) {\n    var index = e.target.value;\n    var selectedFloorPolygonLayers = [];\n    var activeFloorSel = markers[index];\n    var floorColor = '#' + (0x1000000 + Math.random() * 0xffffff).toString(16).substr(1, 6);\n\n    for (var blockIdx = 0; blockIdx < activeFloorSel.blocks.length; blockIdx++) {\n      var blockPolygon = activeFloorSel.blocks[blockIdx];\n      var geoJsonObj = block2Layer(blockPolygon, index, floorColor);\n      selectedFloorPolygonLayers.push(geoJsonObj);\n\n      if (blockPolygon.centre !== undefined) {\n        // label = String(feature.properties.name) \n        var pointLayer = {\n          \"type\": \"Feature\",\n          \"properties\": {\n            \"name\": blockPolygon.text\n          },\n          \"geometry\": {\n            \"type\": \"Point\",\n            \"coordinates\": [blockPolygon.centre[0].lng, blockPolygon.centre[0].lat]\n          }\n        };\n        selectedFloorPolygonLayers.push(pointLayer);\n      }\n    }\n\n    debugger;\n    var featureCollection = {\n      \"type\": \"FeatureCollection\",\n      \"name\": activeFloorSel.description,\n      \"crs\": {\n        \"type\": \"name\",\n        \"properties\": {\n          \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\"\n        }\n      },\n      \"features\": selectedFloorPolygonLayers\n    }; // const floorLayers = new L.GeoJSON(featureCollection);\n    // setActiveFloorPolygons(floorLayers.getLayers());\n\n    setselectedFloorGeoData(featureCollection);\n    setActiveFloorBoundary(activeFloorSel.boundaries);\n    setActiveFloor(activeFloorSel);\n  }\n\n  var addressCardStyle = {\n    backgroundImage: \"url(\".concat(require('./33.png'), \")\"),\n    backgroundSize: 'cover',\n    height: \"423px\"\n  };\n  var floor = {};\n  useEffect(function () {\n    var refTemp = refno.replace(\"/EditBuilding/\", \"\");\n    service.getBuilding(refTemp).then(function (selBuilding) {\n      console.log(\"returning\", selBuilding);\n      debugger;\n      setMarkers(selBuilding[0].floors);\n      var emptyFloor = {\n        \"floorno\": \"1\",\n        \"description\": \"\",\n        \"color\": \"#f18d00\",\n        \"blocks\": [],\n        \"boundaries\": []\n      };\n\n      if (selBuilding[0].floors.length > 0) {\n        setActiveFloor(selBuilding[0].floors[0]);\n        setActiveFloorBoundary(selBuilding[0].floors[0].boundaries);\n        setActiveFloorPolygons(selBuilding[0].floors[0].blocks);\n      } else {\n        setActiveFloor(emptyFloor);\n        setActiveFloorBoundary(emptyFloor.boundaries);\n        setActiveFloorPolygons(emptyFloor.blocks);\n      }\n\n      mapRef.current.leafletElement.flyTo([selBuilding[0].latitude, selBuilding[0].longitude], 16);\n      setDetails(selBuilding[0]); // setBoundary(selBuilding[0].boundary.geometry.coordinates[0]);\n\n      var ml = mapLayers;\n    });\n  }, []);\n\n  function toggle() {\n    setAddFloor(!addFloor);\n  }\n\n  var moveActiveFloor = function moveActiveFloor() {\n    var markersLcl = markers;\n    debugger;\n\n    if (activeFloor !== undefined && activeFloor !== null) {\n      for (var i = 0; i < markersLcl.length; i++) {\n        if (activeFloor.floorno === markersLcl[i].floorno) {\n          markersLcl[i].description = activeFloor.description;\n          markersLcl[i].blocks = activeFloor.blocks;\n          markersLcl[i].boundaries = activeFloor.boundaries;\n        }\n      }\n\n      setMarkers(markersLcl);\n    }\n  };\n\n  var _onCreate = function _onCreate(e) {\n    console.log(e);\n    var layerType = e.layerType,\n        layer = e.layer;\n\n    if (layerType === \"polygon\") {\n      var _leaflet_id = layer._leaflet_id;\n      setMapLayers(function (layers) {\n        return [].concat(_toConsumableArray(layers), [{\n          id: _leaflet_id,\n          latlngs: layer.getLatLngs()[0]\n        }]);\n      });\n    }\n  };\n\n  function Boundary() {\n    var detailLcl = details;\n\n    if (details !== null && details !== undefined && details !== \"\") {\n      if (details.boundaries !== null && details.boundaries !== undefined && details.boundaries !== \"\") {\n        if (details.boundaries.length > 0) {\n          return /*#__PURE__*/_jsxDEV(Polygon, {\n            positions: details.boundaries\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 20\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 19\n          }, this);\n        }\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 17\n        }, this);\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 15\n      }, this);\n    }\n  }\n\n  var _onEdited = function _onEdited(e) {\n    debugger; // console.log(e);\n    // const {\n    //   layers: { _layers },\n    // } = e;\n    // Object.values(_layers).map(({ _leaflet_id, editing }) => {\n    //   setMapLayers((layers) =>\n    //     layers.map((l) =>\n    //       l.id === _leaflet_id\n    //         ? { ...l, latlngs: { ...editing.latlngs[0] } }\n    //         : l\n    //     )\n    //   );\n    // });\n  };\n\n  var _onDeleted = function _onDeleted(e) {\n    console.log(e);\n    var _layers = e.layers._layers;\n    Object.values(_layers).map(function (_ref) {\n      var _leaflet_id = _ref._leaflet_id;\n      setMapLayers(function (layers) {\n        return layers.filter(function (l) {\n          return l.id !== _leaflet_id;\n        });\n      });\n    });\n  };\n\n  var deleteActiveFloor = function deleteActiveFloor() {\n    debugger;\n    var activeFloorLocal = activeFloor;\n    var markersL = markers;\n    var markersAfterDeletion = [];\n\n    for (var j = 0; j < markersL.length; j++) {\n      var marker = markersL[j];\n\n      if (marker.floorno !== activeFloorLocal.floorno) {\n        markersAfterDeletion.push(marker);\n      }\n    }\n\n    setMarkers(markersAfterDeletion);\n    setActiveFloorPolygons(markersAfterDeletion[0].blocks);\n    setActiveFloorBoundary(markersAfterDeletion[0].boundaries);\n    setActiveFloor(markersAfterDeletion[0]);\n  };\n\n  var handleAddFloor = function handleAddFloor() {\n    debugger;\n    var newFloor = {\n      \"floorno\": markers.length + 1,\n      \"description\": newDesc,\n      \"color\": \"#f18d00\",\n      \"blocks\": [],\n      \"boundaries\": []\n    };\n    setActiveFloor(newFloor);\n    setActiveFloorBoundary(newFloor.boundaries);\n    setActiveFloorPolygons(newFloor.blocks);\n    var markersLocal = markers;\n    markersLocal.push(newFloor);\n    setMarkers(markersLocal);\n    setNewDesc(\"\");\n  };\n\n  var changeHandlerDesc = function changeHandlerDesc(event) {\n    return setNewDesc(event.target.value);\n  };\n\n  var updateIsEdit = function updateIsEdit(e, value) {\n    return setIsEdit(value);\n  };\n\n  var handleSaveFloor = function handleSaveFloor(e) {\n    e.preventDefault();\n    debugger;\n    service.updateBuilding(markers[0].id, markers[0]);\n  };\n\n  var handleEditPolygonClick = function handleEditPolygonClick(e) {\n    var drawingLocal = drawing;\n    debugger;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"row\",\n      children: /*#__PURE__*/_jsxDEV(Breadcrumb, {\n        class: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/map1\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"ri-home-4-line mr-1 float-left\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 45\n            }, _this2), \"Home\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 624,\n            columnNumber: 29\n          }, _this2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, _this2), /*#__PURE__*/_jsxDEV(BreadcrumbItem, {\n          active: true,\n          children: details.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 13\n        }, _this2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 623,\n        columnNumber: 11\n      }, _this2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 622,\n      columnNumber: 9\n    }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 9\n    }, _this2), /*#__PURE__*/_jsxDEV(Card, {\n      className: \"iq-card\",\n      children: /*#__PURE__*/_jsxDEV(CardBody, {\n        className: \"iq-card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          style: {\n            margin: \".6%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"iq-card iq-card-block iq-card-stretch iq-card-height bg-transparent\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"iq-card-body rounded p-0\",\n                style: addressCardStyle,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"iq-caption\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: details.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 639,\n                    columnNumber: 17\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: details.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 640,\n                    columnNumber: 17\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: [details.Apartment, \" \", markers.street]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 641,\n                    columnNumber: 17\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: [details.region, \" \", markers.pincode]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 17\n                  }, _this2), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: details.country\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 643,\n                    columnNumber: 17\n                  }, _this2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 638,\n                  columnNumber: 15\n                }, _this2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 13\n              }, _this2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 11\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 10\n          }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"iq-card overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"display-4\",\n                children: activeFloor.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 703,\n                columnNumber: 15\n              }, _this2), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"home-chart-02\",\n                children: /*#__PURE__*/_jsxDEV(Map, {\n                  center: [details[0].latitude, details[0].longitude],\n                  zoom: 17,\n                  ref: mapRef,\n                  children: [/*#__PURE__*/_jsxDEV(LayersControl, {\n                    position: \"topright\",\n                    children: [/*#__PURE__*/_jsxDEV(LayersControl.BaseLayer, {\n                      checked: false,\n                      name: \"Esri WorldImagery\",\n                      group: \"BaseLayers\",\n                      children: /*#__PURE__*/_jsxDEV(TileLayer, {\n                        url: \"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png\",\n                        attribution: \"\\xA9 <a href=\\\"Esri &mdash\\\">Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community</a> contributors\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 768,\n                        columnNumber: 23\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 763,\n                      columnNumber: 21\n                    }, _this2), /*#__PURE__*/_jsxDEV(LayersControl.BaseLayer, {\n                      checked: true,\n                      name: \"OpenStreetMap\",\n                      group: \"BaseLayers\",\n                      children: /*#__PURE__*/_jsxDEV(TileLayer, {\n                        attribution: \"&copy <a href=\\\"http://osm.org/copyright\\\">OpenStreetMap</a> contributors\",\n                        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 778,\n                        columnNumber: 23\n                      }, _this2)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 773,\n                      columnNumber: 21\n                    }, _this2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 762,\n                    columnNumber: 19\n                  }, _this2), /*#__PURE__*/_jsxDEV(EditableGroup, {\n                    data: selectedFloorGeoData\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 786,\n                    columnNumber: 19\n                  }, _this2), /*#__PURE__*/_jsxDEV(Control, {\n                    position: \"topright\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: markers.map(function (mLr, didx) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            variant: \"contained\",\n                            class: \"primary\",\n                            value: didx,\n                            onClick: onFloorSelect,\n                            style: {\n                              \"font-size\": \"1.5rem\",\n                              \"margin-left\": \".05rem\"\n                            },\n                            children: mLr.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 855,\n                            columnNumber: 29\n                          }, _this2)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 847,\n                          columnNumber: 27\n                        }, _this2);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 841,\n                      columnNumber: 21\n                    }, _this2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 840,\n                    columnNumber: 19\n                  }, _this2), /*#__PURE__*/_jsxDEV(Boundary, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 873,\n                    columnNumber: 19\n                  }, _this2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 17\n                }, _this2)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 15\n              }, _this2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 702,\n              columnNumber: 13\n            }, _this2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 11\n          }, _this2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 10\n        }, _this2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 11\n      }, _this2)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 9\n    }, _this2)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 619,\n    columnNumber: 5\n  }, _this2);\n};\n\n_s3(ViewBuilding, \"hic1ucsq2WTH2J2SfM81KYZy1yo=\", false, function () {\n  return [useLeaflet];\n});\n\n_c3 = ViewBuilding;\nexport default ViewBuilding;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"EditableLayer\");\n$RefreshReg$(_c2, \"EditableGroup\");\n$RefreshReg$(_c3, \"ViewBuilding\");","map":{"version":3,"sources":["/Users/likhitha/Documents/cms/client/src/components/dashboard/ViewBuilding.js"],"names":["React","useRef","useEffect","useState","useMap","service","EditControl","LayersControl2","ControlledLayerItem","Map","TileLayer","FeatureGroup","useLeaflet","LayersControl","Marker","Polygon","Popup","LayerGroup","Circle","GeoJSON","Control","L","CardBody","Card","Breadcrumb","BreadcrumbItem","ButtonGroup","ButtonToolbar","Form","FormGroup","Label","Input","ModalHeader","Modal","ModalBody","ModalFooter","makeStyles","Button","set","Tooltip","ReactTooltip","useStyles","theme","map","height","width","zIndex","buttonWrapper","position","bottom","spacing","marginLeft","marginBottom","transform","headerWrapper","marginTop","EditableLayer","props","leaflet","editLayerRef","drawControlRef","showDrawControl","removeControl","current","addControl","leafletElement","clearLayers","addLayer","layer","on","e","onLayerClicked","onMounted","ctl","EditableGroup","selectedLayerIndex","setSelectedLayerIndex","handleLayerClick","drawControl","target","feature","properties","editLayerId","dataLayer","data","layers","i","eachLayer","name","undefined","bindTooltip","permanent","opacity","direction","openTooltip","push","ViewBuilding","editRef","drawing","setDrawing","markers","setMarkers","details","setDetails","boundary","setBoundary","newPosition","setNewPosition","mapLayers","setMapLayers","customLayer","setCustomLayer","activeFloorPolygons","setActiveFloorPolygons","activeFloorBoundary","setActiveFloorBoundary","activeFloor","setActiveFloor","newDesc","setNewDesc","isEdit","setIsEdit","boundaryid","setBoundaryid","selectedFloorGeoData","setselectedFloorGeoData","mapRef","fgRef","refno","window","location","pathname","replace","polygon","center","rectangle","updateFloor","floorno","length","description","color","Math","random","toString","substr","blocks","boundaries","addFloor","setAddFloor","_onFeatureGroupReady","ref","leafletFG","handleDrawPolygonClick","activeFloorLcl","polygonType","value","layerType","_leaflet_id","id","latlngs","getLatLngs","_toolbars","draw","_modes","handler","enable","completeShape","disable","onShapeDrawn","mar","k","boundary_id","console","log","className","sticky","drawingLcl","onEditPath","onCreate","onDeleted","reverseCoordinate","coor","retCoor","coorIdx","bound","row","block2Layer","iBlock","floorIndex","floorColor","blockId","bounds","onFloorSelect","index","selectedFloorPolygonLayers","activeFloorSel","blockIdx","blockPolygon","geoJsonObj","centre","pointLayer","text","lng","lat","featureCollection","addressCardStyle","backgroundImage","require","backgroundSize","floor","refTemp","getBuilding","then","selBuilding","floors","emptyFloor","flyTo","latitude","longitude","ml","toggle","moveActiveFloor","markersLcl","_onCreate","Boundary","detailLcl","_onEdited","_onDeleted","_layers","Object","values","filter","l","deleteActiveFloor","activeFloorLocal","markersL","markersAfterDeletion","j","marker","handleAddFloor","newFloor","markersLocal","changeHandlerDesc","event","updateIsEdit","handleSaveFloor","preventDefault","updateBuilding","handleEditPolygonClick","drawingLocal","margin","Apartment","street","region","pincode","country","mLr","didx"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState, useMap } from \"react\";\nimport service from './services';\nimport { EditControl } from \"react-leaflet-draw\";\nimport LayersControl2, { ControlledLayerItem } from \"./LayerControl2\";\n// import \"./assets/leaflet.css\"\n// import \"./assets/leaflet.draw.css\"\nimport {\n  Map, TileLayer, FeatureGroup, useLeaflet, LayersControl, Marker, Polygon,\n  Popup, LayerGroup, Circle, GeoJSON\n} from \"react-leaflet\";\nimport Control from 'react-leaflet-control';\n\nimport L from \"leaflet\";\n\nimport { CardBody, Card,Breadcrumb, BreadcrumbItem, ButtonGroup, ButtonToolbar, Form, FormGroup, Label, Input, ModalHeader, Modal, ModalBody, ModalFooter } from 'reactstrap';\n// Material components\nimport { makeStyles, Button } from \"@material-ui/core\";\nimport { set } from \"mongoose\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport ReactTooltip from \"react-tooltip\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n  map: ({\n    height: `calc(90vh - 90px)`,\n    width: '60%',\n    zIndex: 0\n  }),\n  buttonWrapper: {\n    zIndex: 1,\n    position: \"absolute\",\n    bottom: theme.spacing(2),\n    marginLeft: \"30%\",\n    marginBottom: \"8%\",\n    transform: \"translateX(-50%)\",\n  },\n  headerWrapper: {\n    zIndex: 1,\n    marginLeft: theme.spacing(3),\n    marginTop: theme.spacing(1),\n  }\n}));\n\n\nfunction EditableLayer(props) {\n  const leaflet = useLeaflet();\n  const editLayerRef = React.useRef();\n  let drawControlRef = React.useRef();\n  let { map } = leaflet;\n\n  useEffect(() => {\n\n    if (!props.showDrawControl) {\n      map.removeControl(drawControlRef.current);\n    } else {\n      map.addControl(drawControlRef.current);\n    }\n\n    editLayerRef.current.leafletElement.clearLayers();\n\n    editLayerRef.current.leafletElement.addLayer(props.layer);\n    props.layer.on(\"click\", function (e) {\n      props.onLayerClicked(e, drawControlRef.current);\n    });\n  }, [props, map]);\n\n  function onMounted(ctl) {\n    drawControlRef.current = ctl;\n  }\n\n  return (\n    <div>\n      <FeatureGroup ref={editLayerRef}>\n        <EditControl\n          position=\"topright\"\n          onMounted={onMounted}\n          {...props}\n        />\n      </FeatureGroup>\n    </div>\n  );\n}\n\nfunction EditableGroup(props) {\n  const [selectedLayerIndex, setSelectedLayerIndex] = useState(0);\n\n  function handleLayerClick(e, drawControl) {\n    setSelectedLayerIndex(e.target.feature.properties.editLayerId);\n  }\n\n  let dataLayer = new L.GeoJSON(props.data);\n  let layers = [];\n  let i = 0;\n  dataLayer.eachLayer((layer) => {\n    layer.feature.properties.editLayerId = i;\n    if(layer.feature.properties.name!==undefined){\n      layer.bindTooltip(layer.feature.properties.name, {permanent: true, opacity: 0.7, direction:\"center\"}).openTooltip();\n    }\n    layers.push(layer);\n    i++;\n  });\n\n  return (\n    <div>\n      {layers.map((layer, i) => {\n        return (\n          <EditableLayer\n            key={i}\n            layer={layer}\n\n            onLayerClicked={handleLayerClick}\n          />\n        );\n      })}\n    </div>\n  );\n}\n\nconst ViewBuilding = (props) => {\n  const editRef = useRef();\n  const [drawing, setDrawing] = useState(false);\n  const [markers, setMarkers] = useState([])\n  const [details, setDetails] = useState('')\n  const [boundary, setBoundary] = useState([]);\n  const [newPosition, setNewPosition] = useState([])\n\n  const [mapLayers, setMapLayers] = useState('');\n  const [customLayer, setCustomLayer] = useState([]);\n\n  const [activeFloorPolygons, setActiveFloorPolygons] = useState([]);\n  const [activeFloorBoundary, setActiveFloorBoundary] = useState([]);\n  const [activeFloor, setActiveFloor] = useState('');\n  const [newDesc, setNewDesc] = useState('');\n  const [isEdit, setIsEdit] = useState('');\n  const [boundaryid, setBoundaryid] = useState(0);\n  const [selectedFloorGeoData, setselectedFloorGeoData] = useState('');\n\n\n  //const purpleOptions = { color: 'purple' }\n  const mapRef = useRef();\n  const fgRef = useRef();\n  const refno = window.location.pathname.replace('/ViewBuilding/', '');\n  const leaflet = useLeaflet();\n\n\n\n\n  const polygon = [\n\n  ]\n  const center = [51.505, -0.09]\n  const rectangle = [\n    [51.49, -0.08],\n    [51.5, -0.06],\n  ]\n  const [selectedLayerIndex, setSelectedLayerIndex] = useState(0);\n\n\n\n\n\n  const updateFloor = {\n\n    floorno: markers.length + 1,\n    description: \"newDesc\",\n    color: '#' + (0x1000000 + (Math.random()) * 0xffffff).toString(16).substr(1, 6),\n    blocks: [],\n    boundaries: []\n  }\n\n  //const [selectedLayerIndex, setSelectedLayerIndex] = useState(0);\n  const [addFloor, setAddFloor] = useState(false);\n\n  const _onFeatureGroupReady = (ref) => {\n    if (ref !== undefined && ref !== null) {\n      let leafletFG = ref.leafletElement;\n      if (customLayer.length > 0) {\n        customLayer.eachLayer(layer => leafletFG.addLayer(layer));\n      }\n    }\n  }\n  const handleDrawPolygonClick = (e) => {\n    const activeFloorLcl = activeFloor;\n    const polygonType = e.target.value;\n    debugger;\n    switch (polygonType) {\n      case \"BO\":\n\n        break;\n\n      case \"BL\":\n\n        break;\n\n      default:\n        break;\n    }\n    if (activeFloorLcl !== undefined && activeFloorLcl !== null) {\n      if (activeFloorLcl.boundaries.length > 3) {\n        const { layerType, layer } = e;\n        if (layerType === \"polygon\") {\n          const { _leaflet_id } = layer;\n          setMapLayers((layers) => [\n            ...layers,\n            { id: _leaflet_id, latlngs: layer.getLatLngs()[0] },\n\n            // [ id: _leaflet_id, latlng:layer.getLatLngs()[0] ]  ,\n          ]);\n        }\n        //Edit this method to perform other actions\n\n        if (!drawing) {\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.enable()\n        } else {\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.completeShape()\n          editRef.current.leafletElement._toolbars.draw._modes.polygon.handler.disable()\n        }\n\n        setDrawing(!drawing)\n\n      }\n\n    }\n\n\n\n  }\n  //let dataLayer = new L.GeoJSON(props.data);\n\n\n\n  const onShapeDrawn = (e) => {\n    debugger;\n    setDrawing(false)\n    const { layerType, layer } = e;\n    if (layerType === \"polygon\") {\n      const { _leaflet_id } = layer;\n\n    }\n    debugger;\n\n    const mar = markers;\n\n    for (var k = 0; k < mar.length; k++) {\n\n      let boundary_id = boundaryid;\n\n      boundary_id = layer._leaflet_id;\n\n\n      setBoundaryid(boundary_id);\n      console.log(boundaryid);\n\n\n      debugger;\n    }\n\n\n\n\n\n\n\n    // e.layer.on('click', () => {\n    //     debugger;\n    //     setDrawing(layer);\n    //     //setSelectedLayerIndex(e.target.boundaryid);\n    //     console.log(selectedLayerIndex);\n    //     debugger;\n    //   editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n    // })\n    e.layer.on('contextmenu', () => {\n      //do some contextmenu action here\n    })\n    e.layer.bindTooltip(\"Text\",\n      {\n        className: 'leaflet-draw-tooltip:before leaflet-draw-tooltip leaflet-draw-tooltip-visible',\n        sticky: true,\n        direction: 'right'\n      }\n    );\n  }\n  function handleLayerClick(e, drawControl) {\n\n    debugger;\n    const { layerType, layer } = e;\n    if (layerType === \"polygon\") {\n      const { _leaflet_id } = layer;\n\n    }\n\n    let drawingLcl = drawing;\n    drawingLcl = layer;\n    setDrawing(drawingLcl);\n    //   setSelectedLayerIndex(e.target.boundaryid);\n    //     console.log(selectedLayerIndex);\n\n\n\n\n\n    debugger;\n    //editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n\n  }\n\n  //   e.layer.on('click', () => {\n  //     debugger;\n  //     setSelectedLayerIndex(e.target.boundaryid);\n  //     console.log(selectedLayerIndex);\n  //     debugger;\n  //   editRef.current.leafletElement._toolbars.edit._modes.edit.handler.enable()\n  // })\n\n  function onEditPath() {\n    debugger;\n  }\n  function onCreate() {\n    debugger;\n  }\n\n  function onDeleted() {\n    debugger;\n  }\n  function reverseCoordinate(coor) {\n    let retCoor = [];\n    if (coor !== undefined && coor !== null) {\n      if (coor.length > 0) {\n        for (let coorIdx = 0; coorIdx < coor.length; coorIdx++) {\n          const bound = coor[coorIdx];\n          let row = [];\n          if (bound.length === 2) {\n            row.push(bound[1]);\n            row.push(bound[0]);\n            retCoor.push(row);\n          }\n        }\n\n      }\n    }\n    return retCoor;\n  }\n  function block2Layer(iBlock, floorIndex, floorColor) {\n\n\n    return {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"id\": iBlock.blockId,\n        \"ground\": floorIndex,\n\n      },\n      \"geometry\": {\n        \"type\": \"Polygon\",\n        \"color\": floorColor,\n        \"coordinates\": [reverseCoordinate(iBlock.bounds)]\n      }\n    }\n\n\n\n  }\n\n  function onFloorSelect(e, data) {\n    const index = e.target.value;\n    let selectedFloorPolygonLayers = [];\n    let activeFloorSel = markers[index];\n    const floorColor = '#' + (0x1000000 + (Math.random()) * 0xffffff).toString(16).substr(1, 6);\n\n    for (let blockIdx = 0; blockIdx < activeFloorSel.blocks.length; blockIdx++) {\n      const blockPolygon = activeFloorSel.blocks[blockIdx];\n      const geoJsonObj = block2Layer(blockPolygon, index, floorColor);\n\n\n      selectedFloorPolygonLayers.push(geoJsonObj);\n      if(blockPolygon.centre!==undefined){\n        \n        // label = String(feature.properties.name) \n        let pointLayer = { \"type\": \"Feature\", \"properties\": { \"name\": blockPolygon.text  }, \n        \"geometry\": { \"type\": \"Point\", \n        \"coordinates\": [blockPolygon.centre[0].lng ,blockPolygon.centre[0].lat  ] } ,\n        \n        \n      };\n     \n        selectedFloorPolygonLayers.push(pointLayer)\n        \n        \n      }\n      \n\n    }\n    debugger;\n    const featureCollection = {\n      \"type\": \"FeatureCollection\",\n      \"name\": activeFloorSel.description,\n      \"crs\": {\n        \"type\": \"name\",\n        \"properties\": {\n          \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\"\n        }\n      },\n      \"features\": selectedFloorPolygonLayers\n    };\n    // const floorLayers = new L.GeoJSON(featureCollection);\n\n    // setActiveFloorPolygons(floorLayers.getLayers());\n    setselectedFloorGeoData(featureCollection);\n    setActiveFloorBoundary(activeFloorSel.boundaries);\n    setActiveFloor(activeFloorSel);\n\n  }\n\n\n\n  const addressCardStyle = {\n    backgroundImage: `url(${require('./33.png')})`,\n\n    backgroundSize: 'cover',\n\n    height: \"423px\",\n\n  }\n\n  let floor = {};\n  useEffect(() => {\n\n    var refTemp = refno.replace(\"/EditBuilding/\", \"\");\n    service\n      .getBuilding(refTemp)\n      .then(selBuilding => {\n        console.log(\"returning\", selBuilding)\n\n        debugger;\n        setMarkers(selBuilding[0].floors);\n        const emptyFloor = {\n          \"floorno\": \"1\",\n          \"description\": \"\",\n          \"color\": \"#f18d00\",\n          \"blocks\": [],\n          \"boundaries\": []\n        };\n        if (selBuilding[0].floors.length > 0) {\n          setActiveFloor(selBuilding[0].floors[0]);\n          setActiveFloorBoundary(selBuilding[0].floors[0].boundaries);\n          setActiveFloorPolygons(selBuilding[0].floors[0].blocks);\n\n        } else {\n\n          setActiveFloor(emptyFloor);\n          setActiveFloorBoundary(emptyFloor.boundaries);\n          setActiveFloorPolygons(emptyFloor.blocks);\n\n\n        }\n\n        mapRef.current.leafletElement.flyTo([selBuilding[0].latitude, selBuilding[0].longitude], 16)\n        setDetails(selBuilding[0]);\n        // setBoundary(selBuilding[0].boundary.geometry.coordinates[0]);\n\n        let ml = mapLayers;\n\n\n\n\n      })\n\n  }, [])\n\n  function toggle() {\n    setAddFloor(!addFloor);\n  }\n\n  const moveActiveFloor = () => {\n    const markersLcl = markers;\n    debugger;\n    if (activeFloor !== undefined && activeFloor !== null) {\n      for (let i = 0; i < markersLcl.length; i++) {\n\n        if (activeFloor.floorno === markersLcl[i].floorno) {\n          markersLcl[i].description = activeFloor.description;\n          markersLcl[i].blocks = activeFloor.blocks;\n          markersLcl[i].boundaries = activeFloor.boundaries;\n\n        }\n      }\n      setMarkers(markersLcl);\n    }\n\n  }\n  const _onCreate = (e) => {\n    console.log(e);\n\n    const { layerType, layer } = e;\n    if (layerType === \"polygon\") {\n      const { _leaflet_id } = layer;\n\n      setMapLayers((layers) => [\n        ...layers,\n        { id: _leaflet_id, latlngs: layer.getLatLngs()[0] },\n      ]);\n    }\n  };\n\n  function Boundary() {\n    const detailLcl = details;\n    if (details !== null && details !== undefined && details !== \"\") {\n      if (details.boundaries !== null && details.boundaries !== undefined\n        && details.boundaries !== \"\") {\n        if (details.boundaries.length > 0) {\n            return(<Polygon positions={details.boundaries}></Polygon>);\n        } else {\n          return (<div></div>)\n        }\n      } else {\n        return (<div></div>)\n      }\n\n    } else {\n      return (<div></div>)\n    }\n\n\n\n  }\n\n  const _onEdited = (e) => {\n    debugger;\n    // console.log(e);\n    // const {\n    //   layers: { _layers },\n    // } = e;\n\n    // Object.values(_layers).map(({ _leaflet_id, editing }) => {\n    //   setMapLayers((layers) =>\n    //     layers.map((l) =>\n    //       l.id === _leaflet_id\n    //         ? { ...l, latlngs: { ...editing.latlngs[0] } }\n    //         : l\n    //     )\n    //   );\n    // });\n  };\n\n  const _onDeleted = (e) => {\n    console.log(e);\n    const {\n      layers: { _layers },\n    } = e;\n\n    Object.values(_layers).map(({ _leaflet_id }) => {\n      setMapLayers((layers) => layers.filter((l) => l.id !== _leaflet_id));\n    });\n  };\n\n  const deleteActiveFloor = () => {\n    debugger;\n    const activeFloorLocal = activeFloor;\n    const markersL = markers;\n    const markersAfterDeletion = [];\n    for (let j = 0; j < markersL.length; j++) {\n      const marker = markersL[j];\n      if (marker.floorno !== activeFloorLocal.floorno) {\n        markersAfterDeletion.push(marker);\n      }\n\n    }\n    setMarkers(markersAfterDeletion);\n    setActiveFloorPolygons(markersAfterDeletion[0].blocks);\n    setActiveFloorBoundary(markersAfterDeletion[0].boundaries);\n    setActiveFloor(markersAfterDeletion[0]);\n\n  }\n\n\n  const handleAddFloor = () => {\n    debugger;\n    const newFloor = {\n      \"floorno\": markers.length + 1,\n      \"description\": newDesc,\n      \"color\": \"#f18d00\",\n      \"blocks\": [],\n      \"boundaries\": []\n    }\n    setActiveFloor(newFloor);\n    setActiveFloorBoundary(newFloor.boundaries);\n    setActiveFloorPolygons(newFloor.blocks);\n    const markersLocal = markers;\n    markersLocal.push(newFloor);\n    setMarkers(markersLocal);\n\n    setNewDesc(\"\");\n  }\n\n\n  const changeHandlerDesc = (event) => setNewDesc(event.target.value);\n  const updateIsEdit = (e, value) => setIsEdit(value);\n\n  const handleSaveFloor = (e) => {\n    e.preventDefault()\n    debugger;\n\n    service\n      .updateBuilding(markers[0].id, markers[0])\n\n  }\n\n  const handleEditPolygonClick = (e) => {\n    const drawingLocal = drawing;\n    debugger;\n\n  }\n\n\n\n  return (\n\n    <div>\n      \n     \n        <div class=\"row\">\n          <Breadcrumb class=\"mb-4\">\n            <BreadcrumbItem><a href=\"/map1\"><i\n              className=\"ri-home-4-line mr-1 float-left\" />Home</a></BreadcrumbItem>\n            <BreadcrumbItem active>{details.name}</BreadcrumbItem>\n          </Breadcrumb>\n\n        </div>\n\n        <div></div>\n        <Card className=\"iq-card\">\n          <CardBody className=\"iq-card-body\">\n         <div className=\"row\" style={{ margin: \".6%\" }}>\n         <div className=\"col-lg-4\">\n          <div className=\"iq-card iq-card-block iq-card-stretch iq-card-height bg-transparent\">\n            <div className=\"iq-card-body rounded p-0\" style={addressCardStyle} >\n              <div className=\"iq-caption\">\n                <h1>{details.name}</h1>\n                <h3>{details.description}</h3>\n                <h3>{details.Apartment} {markers.street}</h3>\n                <h3>{details.region} {markers.pincode}</h3>\n                <h3>{details.country}</h3>\n              </div>\n            </div>\n          </div>\n        </div>\n\n          {/*<div className=\"col-lg-4\">\n            <div className=\"iq-card iq-card-block iq-card-stretch iq-card-height bg-transparent\">\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Building Id</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.id} disabled />\n              </FormGroup>\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Building Name</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.description} />\n              </FormGroup>\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Street</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.street} />\n              </FormGroup>\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Apartment</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.Apartment} />\n              </FormGroup>\n\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Doornum</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.doornum} />\n              </FormGroup>\n\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Region</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.region} />\n              </FormGroup>\n\n              <FormGroup className=\"form-group\">\n                <Label htmlFor=\"exampleInputReadonly\">Country</Label>\n                <Input type=\"text\" className=\"form-control\" id=\"exampleInputReadonly\"\n                  readOnly=\"\" defaultValue={details.country} />\n\n              </FormGroup>\n\n            </div> */}\n          {/* </div> */}\n\n\n          <div className=\"col-lg-8\">\n            <div className=\"iq-card overflow-hidden\" >\n              <h6 className=\"display-4\" >{activeFloor.description}</h6>\n\n              <div id=\"home-chart-02\">\n                <Map center={[details[0].latitude, details[0].longitude]} zoom={17} ref={mapRef} >\n                  {/* <Control position=\"topright\">\n                    <button class=\"primary\" onClick={handleDrawPolygonClick} value=\"BO\"\n                    style={{ \"font-size\": \"1.5rem\", \"margin-left\": \".05rem\" ,\"margin-right\": \".05rem\" }}>\n                    Add Floor\n                        </button>\n                    <Button className=\"btn btn-primary\"\n                      style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\", \"margin-right\": \".05rem\" }} color=\"primary\" onClick={handleSaveFloor}> SaveBuilding </Button>\n\n\n                    <Button className=\"btn btn-primary\" style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\", \"margin-right\": \".05rem\" }} color=\"primary\" onClick={() => toggle(\"addFloor\")}> AddFloor </Button>{' '}\n\n\n                    <Modal isOpen={addFloor} toggle={() => toggle(\"addFloor\")} className=\"modal-sm\">\n                      <ModalHeader className=\"btn btn-primary\" toggle={() => toggle(\"addFloor\")}>Add Floor</ModalHeader>\n                      <ModalBody>\n\n\n                        <p>Floor: {markers.length + 1}</p>\n\n                        <p>Enter Floor Description</p>\n                        <input type=\"text\" onChange={changeHandlerDesc} value={newDesc}\n                          lur={updateIsEdit} />\n\n                      </ModalBody>\n                      <ModalFooter>\n\n                        <Button color=\"primary\" onClick={() => {\n                          toggle(\"addFloor\");\n                          // handleAddFloor(); \n                          handleAddFloor();\n\n                        }}>OK</Button>{' '}\n                        <Button color=\"secondary\" onClick={() => toggle(\"addFloor\")}>Cancel</Button>\n                      </ModalFooter>\n                    </Modal>\n\n                    <button class=\"btn btn-primary\" onClick={deleteActiveFloor} value=\"BO\"\n                      style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\", \"margin-right\": \".05rem\" }}>\n                      Delete Floor\n                        </button>\n                    <button class=\"btn btn-primary\" onClick={handleDrawPolygonClick} value=\"BO\"\n                      style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\", \"margin-right\": \".05rem\" }}>\n                      Manage Boundary\n                        </button>\n\n                    <button class=\"btn btn-primary\" onClick={handleDrawPolygonClick} value=\"BL\"\n                      style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\" }}>\n                      AddBlock\n                        </button>\n\n                    <button class=\"btn btn-primary\" onClick={handleEditPolygonClick}\n                      style={{ \"font-size\": \"1.0rem\", \"margin-left\": \".05rem\" }}>\n                      EditBlock\n                        </button>\n                  </Control> */}\n                  <LayersControl position=\"topright\">\n                    <LayersControl.BaseLayer\n                      checked={false}\n                      name=\"Esri WorldImagery\"\n                      group=\"BaseLayers\"\n                    >\n                      <TileLayer\n                        url=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.png\"\n                        attribution='&copy; <a href=\"Esri &mdash\">Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community</a> contributors'\n                      />\n                    </LayersControl.BaseLayer >\n                    <LayersControl.BaseLayer\n                      checked={true}\n                      name=\"OpenStreetMap\"\n                      group=\"BaseLayers\"\n                    >\n                      <TileLayer\n                        attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                      />\n                    </LayersControl.BaseLayer >\n\n                  </LayersControl>\n\n                  <EditableGroup data={selectedFloorGeoData} />\n\n\n                  {/* <FeatureGroup>\n                  \n                  {activeFloorPolygons.map((polygonObjLayer,polyIdx)=>(\n                      <div>\n                      <EditControl\n                      layer={polygonObjLayer}\n                      position='topleft'\n                      onCreated={onShapeDrawn}\n                      onEdited = {_onEdited}\n                      onDeleted = {_onDeleted}\n                      \n                      \n                      \n                      //here you can specify your shape options and which handler you want to enable\n                      draw={{\n                        rectangle: false,\n                        polygon: true,\n                        circle: false,\n                        polyline: false,\n                        circlemarker: false,\n                        marker: false\n  \n                      }}\n\n                    >\n  \n  \n  \n  \n                    </EditControl>\n\n                    <Polygon positions={polygonObj.bounds} ></Polygon>\n                    </div>\n                    \n                  ))}\n                <Polygon positions={activeFloorBoundary} onClick={handleLayerClick}> </Polygon>\n\n                \n\n                </FeatureGroup> */}\n\n{/* <div className=\"App\">\n      <button data-tip data-for=\"registerTip\">\n        Register\n      </button>\n\n      <ReactTooltip id=\"registerTip\" place=\"top\" effect=\"solid\">\n        Tooltip for the register button\n      </ReactTooltip>\n    </div> */}\n\n                  <Control position=\"topright\" >\n                    <div>\n                      {\n                        markers.map((mLr, didx) => (\n\n\n\n                          <div>\n                            {/* <Tooltip\n                            style={{fontSize:\"20px\"}}\n                         title=   {<h3 style={{ color: \"lightblue\" }}>{mLr.description}</h3>}\n       \n        placement=\"left\"\n      > */}\n\n                            <button variant=\"contained\" class=\"primary\" value={didx} onClick={onFloorSelect} style={{ \"font-size\": \"1.5rem\", \"margin-left\": \".05rem\" }}>\n                              {mLr.description}\n                            </button>\n                            {/* </Tooltip> */}\n                            {/* <ReactTooltip id=\"registerTip\" place=\"top\" effect=\"solid\">\n        {mLr.description}\n      </ReactTooltip> */}\n\n\n                          </div>\n                        ))\n\n                      }\n\n                    </div>\n                  </Control>\n\n\n                  <Boundary></Boundary>\n\n\n\n                </Map>\n              </div>\n            </div>\n          </div>\n        </div>\n        </CardBody>\n        </Card>\n\n\n\n\n      </div>\n  )\n}\n\n\nexport default ViewBuilding;"]},"metadata":{},"sourceType":"module"}